<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Login - RentProx</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <style>
      :root{
        --bg:#f4f7fb;
        --card:#ffffff;
        --accent:#0d6efd; /* blue */
        --accent-2:#7c3aed; /* purple */
        --muted:#6c757d;
      }
      html,body{height:100%;}
      body { background: linear-gradient(180deg,var(--bg),#eef4ff 60%); font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; color:#222; }
      .site-header { background: linear-gradient(90deg,var(--card),#fbfdff); border-bottom: 1px solid rgba(13,110,253,0.06); }
      .brand { font-weight:700; color:var(--accent); text-decoration:none; letter-spacing:0.2px; }
      .page-card { max-width:540px; margin: 36px auto; }
      footer.site-footer { background:#fff; border-top:1px solid #eef2ff; padding:18px 0; margin-top:32px; }

      /* Card styling */
      .card.shadow-sm{ border:0; border-radius:12px; overflow:hidden; box-shadow: 0 8px 24px rgba(17,24,39,0.06); }
      .card-body{ padding:28px; }

      /* Accent button */
      .btn-primary{ background:linear-gradient(90deg,var(--accent),var(--accent-2)); border:0; box-shadow:none; }
      .btn-primary:hover{ filter:brightness(.95); }

      /* Inputs */
      .form-control:focus{ box-shadow: 0 0 0 0.15rem rgba(13,110,253,0.12); border-color: var(--accent); }
      label.form-label{ font-weight:600; color:var(--muted); }

      /* compact layout */
      .page-quiet{ max-width:420px; margin: 28px auto; }

      /* small helpers */
      .muted{ color:var(--muted); }

      @media (min-width:1200px){ .page-card{ margin-top:64px; } }
    </style>
  </head>
  <body class="bg-light">

    <!-- Header -->
    <header class="site-header py-3">
      <div class="container d-flex align-items-center justify-content-between">
        <a class="brand h4 mb-0" href="/">RentProx</a>
        <nav>
          <a class="btn btn-link" href="login_plm.html">Login</a>
          <a class="btn btn-outline-primary ms-2" href="property-listing">Browse listings</a>
        </nav>
      </div>
    </header>

    <main class="container page-card">
      <div class="card shadow-sm">
        <div class="card-body">
          <h3 class="card-title mb-2">Welcome back</h3>
          <p class="text-muted mb-4">Sign in to access your dashboard and manage properties</p>
          <form id="login_plm" name="login_plm">
            <div class="mb-3">
              <label class="form-label">Email</label>
              <input type="email" class="form-control" id="email" name="email" required />
            </div>
            <div class="mb-3">
              <label class="form-label">Password</label>
              <input type="password" class="form-control" id="password" name="password" required />
            </div>
            <div class="d-grid gap-2">
              <button class="btn btn-primary w-100" type="submit">Login</button>
              <a class="btn btn-outline-secondary" href="property-listing">Browse listings without account</a>
            </div>
          </form>
          <div class="mt-3 text-center">
            <small class="muted">Don't have an account? <a href="signup_plm.html">Sign up</a></small>
          </div>

        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="site-footer">
      <div class="container d-flex justify-content-between align-items-center">
        <div>
          <strong>RentProx</strong> &copy; 2026
        </div>
        <div>
          <a class="me-3 text-muted" href="#">About</a>
          <a class="me-3 text-muted" href="#">Contact</a>
          <a class="text-muted" href="#">Privacy</a>
        </div>
      </div>
    </footer>

    <script>
      (function(){
        const clearAndProtect = (formId) => {
          const f = document.getElementById(formId);
          if(!f) return;
          // add invisible dummy fields to consume autofill
          if(!f.querySelector('[name="fakeusernameremembered"]')){
            const userDummy = document.createElement('input');
            userDummy.type = 'text'; userDummy.name = 'fakeusernameremembered'; userDummy.autocomplete = 'username'; userDummy.style.display = 'none';
            const passDummy = document.createElement('input');
            passDummy.type = 'password'; passDummy.name = 'fakepasswordremembered'; passDummy.autocomplete = 'current-password'; passDummy.style.display = 'none';
            f.insertBefore(userDummy, f.firstChild);
            f.insertBefore(passDummy, f.firstChild);
          }

          // disable autocomplete and clear values
          f.setAttribute('autocomplete', 'off');
          const inputs = Array.from(f.querySelectorAll('input'));
          inputs.forEach(i => {
            i.setAttribute('autocomplete', 'off');
            i.setAttribute('autocorrect', 'off');
            i.setAttribute('autocapitalize', 'off');
            i.setAttribute('spellcheck', 'false');
            try { i.value = ''; } catch (e) {}
            // temporary readonly trick to prevent autofill
            i.readOnly = true;
            i.addEventListener('focus', () => { i.readOnly = false; });
          });

          try { f.reset(); } catch (e) {}
          window.addEventListener('pageshow', (ev) => { if (ev.persisted) { try { f.reset(); } catch (e) {} } });
          setTimeout(() => { inputs.forEach(i => i.readOnly = false); }, 50);
        };

        document.addEventListener('DOMContentLoaded', () => clearAndProtect('login_plm'));

        // Reattach login submit handler
        document.addEventListener('DOMContentLoaded', () => {
          const form = document.getElementById('login_plm');
          if(!form) return;
          form.addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value;
            const users = JSON.parse(localStorage.getItem('rp_users') || '[]');
            const user = users.find(u => u.email === email && u.password === password);
            if (!user) { alert('Invalid credentials'); return; }
            sessionStorage.setItem('rp_current_user', JSON.stringify(user));
            window.location.href = 'property-listing';
          });
        });
      })();
    </script>
  </body>
</html>
